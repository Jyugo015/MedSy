<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clinic Portal - Medical Logs</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body>
  <!-- Clinic Staff Login -->
  <div class="container" id="loginContainer">
    <h2>Clinic Staff Login</h2>
    <label>Username: <input type="text" id="username" class="form-input" /></label><br />
    <label>Password:
      <input type="password" id="password" class="form-input" /></label><br />
    <button onclick="staffLogin()" class="btn">Login</button>
    <p id="loginError" class="error-msg hidden">Invalid credentials!</p>
  </div>

  <div class="container hidden" id="roleAssignmentContainer">
    <h2>Role Assignment</h2>
    <form id="addRoleForm">
      <div>
        <label>
          <input type="radio" name="addressOption" value="current" checked />
          Use Current MetaMask Address
        </label>
        <label>
          <input type="radio" name="addressOption" value="manual" />
          Enter Address Manually
        </label>
      </div>

      <div>
        <input id="addressInput" name="address" placeholder="Wallet address" required readonly />

        <select name="role">
          <option value="doctor">Doctor</option>
          <option value="nurse">Nurse</option>
          <option value="staff">Staff</option>
        </select>

        <button type="submit">Add Role</button>
      </div>


    </form>
  </div>

  <!-- Main Panel -->
  <div id="mainPanel" class="panel hidden">
    <h2>Welcome, Clinic Staff</h2>

    <!-- Input Patient Address/ID -->
    <label>Patient ID/Address:
      <input type="text" id="patientID" class="form-input" /> </label><br />

    <!-- Action Buttons -->
    <button onclick="viewRecords()" class="btn">View Records</button>
    <button onclick="toggleAddRecord()" class="btn">Add Record</button>

    <!-- View Records -->
    <div id="recordsPanel" class="hidden">
      <h3>Medical Records</h3>
      <pre id="recordsDisplay" class="records-display"></pre>
    </div>

    <!-- Add Record Form -->
    <div id="addRecordPanel" class="hidden">
      <h3>Add Medical Record</h3>
      <form id="recordForm">
        <label for="patientAddress">Patient Address:</label>
        <input type="text" id="patientAddress" name="patientAddress" required /><br />

        <label for="condition">Condition:</label>
        <input type="text" id="condition" name="condition" required /><br />

        <label for="diagnosis">Diagnosis:</label>
        <input type="text" id="diagnosis" name="diagnosis" required /><br />

        <label for="treatment">Treatment:</label>
        <input type="text" id="treatment" name="treatment" required /><br />

        <label for="file">Attach File:</label>
        <input type="file" id="file" name="file" /><br /><br />

        <button type="submit" class="btn">Submit Record</button>
      </form>
    </div>
  </div>

  <div id="result"></div>

  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>

</html>